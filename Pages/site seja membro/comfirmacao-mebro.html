<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confirma√ß√£o e pagamento</title>
    <link rel="stylesheet" href="../../Css/style.css">
    <link rel="stylesheet" href="../site da compra/confirmarpagamento.css">

</head>

<body>
    <div class="conteudo-sidebar">
        <div class="sidebar" id="sidebar">
            <nav>

                <a href="../../index.html"> <img src="../../IMG/logo-blog.png" alt=""></a>

                <div class="itens-sidebar">
                    <ul>
                        <li><a href="../comunidade.html">Comunidade</a></li>
                        <li><a href="../recomendacoes.html">Recomenda√ß√µes</a></li>
                        <li><a href="sejaM.html">Seja Membro</a></li>
                        <li><a href="../loja.html">Loja</a></li>
                    </ul>
                </div>
            </nav>

            <div class="perfil-sidebar">
                <a href="../Login/login.html">
                    <img src="../../IMG/Post-Perfil/Perfil/imagem de perfil.png" alt="">
                    <div>
                        <h3 class="nome-perfil">TioGilGameplays</h3>
                        <h3 class="user-perfil">@Tiotiogilgameplays123</h3>
                    </div>
                </a>
            </div>
        </div>

        <button id="menu-hamburguer">
            <img src="../../IMG/Gerais/Menu.png" alt="">
        </button>

        <div class="todo-conteudo">
            <header>
                <h1>Loja do Tio Gil</h1>
                <h2>Confirma√ß√£o de membro!</h2>
            </header>

            <p class="hero-texto">
                Agora √© hora de completar sua assinatura como membro do universo do Tio Gil.‚Ä® Nesta etapa, voc√™ vai
                preencher seus dados pessoais, escolher a forma de pagamento e confirmar todas as informa√ß√µes antes de
                concluir.
                Verifique se tudo est√° certinho, isso garante que sua assinatura seja ativada sem erros e que voc√™ tenha
                acesso imediato aos benef√≠cios do seu n√≠vel escolhido.
                Quando tudo estiver conferido, √© s√≥ finalizar o pagamento e pronto!‚Ä® Bem-vindo(a) ao elenco oficial do
                Tio Gil!
            </p>

            <main class="form-container">
                <section class="card dados-pessoais">
                    <h3>Dados pessoais</h3>
                    <div class="grid-2">
                        <label>
                            Nome
                            <input type="text" placeholder="Nome*">
                        </label>
                        <label>
                            Sobrenome
                            <input type="text" placeholder="Sobrenome*">
                        </label>
                    </div>
                    <div class="grid-ddi-tel-cpf">
                        <label class="label-ddi">
                            DDI
                            <input type="text" value="+55" readonly>
                        </label>
                        <label>
                            Telefone
                            <input type="text" id="telefone" placeholder="(xx) xxxxx-xxxx*" inputmode="numeric">
                        </label>
                        <label>
                            CPF
                            <input type="text" id="cpf" placeholder="000.000.000-00*" inputmode="numeric" maxlength="14"
                                aria-describedby="cpf-error">
                            <span id="cpf-error"
                                style="color:#c0392b;font-size:13px;display:block;margin-top:6px;"></span>
                        </label>
                    </div>
                    <div class="grid-2">
                        <label>
                            Data de Nascimento*
                            <input type="text" id="datanascimento" placeholder="dd/mm/aaaa*" maxlength="10">
                            <span id="datanascimento-error"
                                style="color:#c0392b;font-size:13px;display:block;margin-top:6px;"></span>
                        </label>
                    </div>
                </section>


                <section class="card pagamento">
                    <h3>Pagamento</h3>
                    <ul class="metodos">
                        <li>
                            <label class="metodo">
                                <input type="radio" name="pagamento" checked>
                                <span class="icone">üí≤</span>
                                <div>
                                    <strong>Pix</strong>
                                    <div class="valor">R$ 199,90</div>
                                </div>
                            </label>
                        </li>
                        <li>
                            <label class="metodo">
                                <input type="radio" name="pagamento">
                                <span class="icone">üí≥</span>
                                <div>
                                    <strong>Cart√£o de Cr√©dito</strong>
                                    <div class="valor">R$ 199,90</div>
                                </div>
                            </label>
                        </li>
                        <li>
                            <label class="metodo">
                                <input type="radio" name="pagamento">
                                <span class="icone">üßæ</span>
                                <div>
                                    <strong>Boleto</strong>
                                    <div class="valor">R$ 199,90</div>
                                </div>
                            </label>
                        </li>
                    </ul>
                    <div class="actions">
                        <a href="../../index.html" class="btn-confirm">Confirmar pagamento</a>
                    </div>
                </section>
            </main>


        </div>
    </div>

    <footer>
            <div class="footer-conteudo">
                <div class="footer-left">
                    <img src="../../IMG/logo-blog.png" alt="Logo do Site">

                </div>
                <div class="footer-center">
                    <p>&copy; 2025 Todos os direitos reservados. Desenvolvido por <a href="">PinkWave</a></p>
                </div>
                <div class="footer-right">
                    <a href="#"><img src="youtube-icon.png" alt="YouTube"></a>
                    <a href="#"><img src="instagram-icon.png" alt="Instagram"></a>
                </div>
            </div>
        </footer>




    <script>
        (function () {
            function cleanCpf(v) { return v.replace(/\D/g, ''); }

            function validateCPF(cpf) {
                cpf = cleanCpf(cpf);
                if (!cpf || cpf.length !== 11) return false;
                if (/^(\d)\1{10}$/.test(cpf)) return false;
                let sum = 0;
                for (let i = 0; i < 9; i++) sum += parseInt(cpf.charAt(i)) * (10 - i);
                let r = sum % 11;
                let d1 = (r < 2) ? 0 : 11 - r;
                if (d1 !== parseInt(cpf.charAt(9))) return false;
                sum = 0;
                for (let i = 0; i < 10; i++) sum += parseInt(cpf.charAt(i)) * (11 - i);
                r = sum % 11;
                let d2 = (r < 2) ? 0 : 11 - r;
                if (d2 !== parseInt(cpf.charAt(10))) return false;
                return true;
            }

            const cpfInput = document.getElementById('cpf');
            const cpfError = document.getElementById('cpf-error');
            const datanascimentoError = document.getElementById('datanascimento-error');
            const confirmBtn = document.querySelector('.btn-confirm');

            function isValidDateBR(str) {
                if (!/^\d{2}\/\d{2}\/\d{4}$/.test(str)) return false;
                const parts = str.split('/');
                const d = parseInt(parts[0], 10);
                const m = parseInt(parts[1], 10);
                const y = parseInt(parts[2], 10);
                if (y < 1900 || y > new Date().getFullYear()) return false;
                if (m < 1 || m > 12) return false;
                const dt = new Date(y, m - 1, d);
                if (dt.getFullYear() !== y || dt.getMonth() + 1 !== m || dt.getDate() !== d) return false;
                const today = new Date();
                if (dt > today) return false;
                return true;
            }

            function validateAll() {
                const required = Array.from(document.querySelectorAll('input[placeholder*="*"]'));
                let firstInvalid = null;
                let allValid = true;

                required.forEach(input => {
                    const val = (input.value || '').trim();
                    if (input.id === 'cpf') {
                        const cleaned = cleanCpf(val);
                        if (cleaned.length !== 11 || !validateCPF(cleaned)) {
                            allValid = false;
                            if (!firstInvalid) firstInvalid = input;
                            cpfError.textContent = 'CPF inv√°lido';
                            input.style.border = '1px solid #c0392b';
                        } else {
                            cpfError.textContent = '';
                            input.style.border = '';
                        }
                        return;
                    }

                    if (input.id === 'telefone') {
                        const digits = val.replace(/\D/g, '');
                        if (digits.length < 10) { allValid = false; if (!firstInvalid) firstInvalid = input; input.style.border = '1px solid #c0392b'; } else { input.style.border = ''; }
                        return;
                    }

                    if (input.id === 'datanascimento') {
                        if (!isValidDateBR(val)) {
                            allValid = false; if (!firstInvalid) firstInvalid = input; input.style.border = '1px solid #c0392b';
                            if (datanascimentoError) datanascimentoError.textContent = 'Data inv√°lida';
                        } else { input.style.border = ''; if (datanascimentoError) datanascimentoError.textContent = ''; }
                        return;
                    }

                    if (val === '') {
                        allValid = false;
                        if (!firstInvalid) firstInvalid = input;
                        input.style.border = '1px solid #c0392b';
                    } else {
                        input.style.border = '';
                    }
                });

                if (confirmBtn) {
                    confirmBtn.disabled = !allValid;
                    confirmBtn.style.opacity = allValid ? '1' : '0.6';
                }

                return { allValid, firstInvalid };
            }

            if (confirmBtn) { confirmBtn.disabled = true; confirmBtn.style.opacity = '0.6'; }

            const requiredInputs = Array.from(document.querySelectorAll('input[placeholder*="*"]'));
            requiredInputs.forEach(i => {
                i.addEventListener('input', function () { validateAll(); });
                i.addEventListener('blur', function () { validateAll(); });
            });

            confirmBtn.addEventListener('click', function (e) {
                const { allValid, firstInvalid } = validateAll();
                if (!allValid) {
                    e.preventDefault();
                    if (firstInvalid) firstInvalid.focus();
                } else {
                    alert('Pagamento confirmado.');
                }
            });

        })();
    </script>
    <script>
        const dataNascimentoInput = document.getElementById('datanascimento');
        const numeroInput = document.getElementById('numero');
        const cpfInputMask = document.getElementById('cpf');

        function maskData(value) {
            let v = value.replace(/\D/g, '');
            if (v.length <= 2) return v;
            if (v.length <= 4) return v.slice(0, 2) + '/' + v.slice(2);
            return v.slice(0, 2) + '/' + v.slice(2, 4) + '/' + v.slice(4, 8);
        }

        function maskCPF(value) {
            let v = value.replace(/\D/g, '');
            if (v.length <= 3) return v;
            if (v.length <= 6) return v.slice(0, 3) + '.' + v.slice(3);
            if (v.length <= 9) return v.slice(0, 3) + '.' + v.slice(3, 6) + '.' + v.slice(6);
            return v.slice(0, 3) + '.' + v.slice(3, 6) + '.' + v.slice(6, 9) + '-' + v.slice(9, 11);
        }

        function maskNumero(value) {
            return value;
        }

        function maskTelefone(value) {
            let v = value.replace(/\D/g, '');
            if (v.length > 11) v = v.slice(0, 11);
            if (v.length <= 2) return v;
            if (v.length <= 7) return '(' + v.slice(0, 2) + ') ' + v.slice(2);
            return '(' + v.slice(0, 2) + ') ' + v.slice(2, 7) + '-' + v.slice(7);
        }

        dataNascimentoInput.addEventListener('input', function (e) {
            e.target.value = maskData(e.target.value);
        });

        cpfInputMask.addEventListener('input', function (e) {
            e.target.value = maskCPF(e.target.value);
            updateState();
        });

        numeroInput.addEventListener('input', function (e) {
            e.target.value = maskNumero(e.target.value);
        });

        const telefoneInput = document.getElementById('telefone');
        telefoneInput.addEventListener('input', function (e) {
            e.target.value = maskTelefone(e.target.value);
        });
    </script>
    <script src="../../JavaScript/Index/SideBar.js"></script>
</body>

</html>